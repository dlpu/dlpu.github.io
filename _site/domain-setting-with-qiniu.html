<!DOCTYPE html>
<!--[if lte IE 8]><html class="ie lte8"><![endif]-->
<!--[if IE]><html class="ie"><![endif]-->
<!--[if !IE]><!--><html><!--<![endif]-->
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <title>七牛的自定义域名 | 殷东亮的博客</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0,maximum-scale=1.3, user-scalable=no" />
    <meta name="description" content="使用七牛也有一段时间了，毫无疑问七牛是我用过的最好用的图床，此前已经说过七牛的一些优点。前些天把域名备案搞定，这下可以使用七牛云的自定义域名功能。" />
    <meta name="keywords" content="七牛, 域名, Jekyll" />
    <meta name="author" content="fooleap" />
    <meta http-equiv="Cache-Control" content="no-transform" />
    <meta http-equiv="Cache-Control" content="no-siteapp" />
    <link rel="canonical" href="http://127.0.0.1:4000/domain-setting-with-qiniu" />
    <link rel="stylesheet" type="text/css" href="/assets/css/style.css" />
    <link rel="icon" href="/favicon.png" />
    <link rel="alternate" type="application/atom+xml" title="殷东亮的博客 Atom Feed" href="http://blog.fooleap.org/atom.xml" />
    <script type="text/javascript" src="/assets/js/modernizr.js"></script>
    <!--[if lte IE 9]>
      <script src="/assets/js/html5shiv.min.js"></script>
      <script src="/assets/js/respond.min.js"></script>
      <script src="/assets/js/classList.min.js"></script>
      <script type="text/javascript">
        document.createElement('main');
      </script>
    <![endif]-->
  </head>
  <body>
  <nav id="navigation">
      <ul class="navigation-list hide">
          <li><a href="/" class="navigation-item"><i class="icon-home"></i>首页</a></li>
          <li><a href="/archive.html" class="navigation-item"><i class="icon-box"></i>归档</a></li>
          <li><a href="/about.html" class="navigation-item"><i class="icon-user"></i>关于</a></li>
      </ul>
      <i id="menu" class="icon icon-menu"></i>
  </nav>
  
  <div class="container">
    <main class="wrapper">
      <header class="site-header">
        <h1>
          七牛的自定义域名
        </h1>
        <h2 class="sub-heading">
            <i class="icon-calendar"></i><time datetime="2015-11-26">2015 年 11 月 26 日</time>
        </h2>
      </header>
  <article class="post-content">
    
  <div class="main-content">
<p>使用七牛也有一段时间了，毫无疑问七牛是我用过的最好用的图床，此前已经说过 <a href="/image-hosting.html">七牛的一些优点</a>。前些天 <a href="/registration-record.html">把域名备案搞定</a>，这下可以使用七牛云的自定义域名功能。</p>

<p>下面简单讲一下七牛的域名绑定，比较实在的好处是：告别丑陋的临时域名，更好地装逼。无论是类似于 <code class="highlighter-rouge">fooleap.qiniudn.com</code> 的七牛二级域名，或是 <code class="highlighter-rouge">7fv9cr.com1.z0.glb.clouddn.com</code> 的七牛临时域名，怎么看也都不如自己一个自己博客主域一样的二级域名来得爽。</p>

<p>七牛的自定义域名设置很方便也很简单，必要的前提条件有两个：</p>

<ul>
  <li>账户至少要有 10 元余额：可通过 <code class="highlighter-rouge">财务</code> - <code class="highlighter-rouge">充值</code></li>
  <li>已完成备案的域名：鄙人已备案</li>
</ul>

<p>完成上面的步骤之后，在所需要绑定的空间 <code class="highlighter-rouge">空间设置</code> - <code class="highlighter-rouge">域名设置</code> - <code class="highlighter-rouge">自定义域名</code> 点击 <code class="highlighter-rouge">配置</code> 按钮，并根据实际需求填写提交。鄙人填写如下图</p>

<p><img src="http://source.fooleap.org/domain-setting-with-qiniu-01.png" alt="提交申请" />
▲提交申请</p>

<p>点击提交之后便是等待处理阶段，提示 24 小时内配置完成。</p>

<p><img src="http://source.fooleap.org/domain-setting-with-qiniu-02.png" alt="等待处理" />
▲等待处理</p>

<p>审核通过之后，便可根据提示设置域名解析。</p>

<p><img src="http://source.fooleap.org/domain-setting-with-qiniu-03.png" alt="提示配置 CNAME" />
▲提示配置 CNAME</p>

<p><img src="http://source.fooleap.org/domain-setting-with-qiniu-04.png" alt="设置域名解析" />
▲设置域名解析</p>

<p>验证成功便完成自定义域名的设置。</p>

<p><img src="http://source.fooleap.org/domain-setting-with-qiniu-05.png" alt="配置完成" />
▲配置完成</p>

<p>鄙人使用 Jekyll，设置了一个 <code class="highlighter-rouge">site.IMG_PATH</code> 的变量为图床网址，仅需修改 <code class="highlighter-rouge">_config.yml</code> 相应的配置即可全站替换资源 URL。</p>

<p>这里顺带提一下，若 YAML 头信息（Front Matter）中也想引用类似 <code class="highlighter-rouge">site.IMG_PATH</code> 的变量时，鄙人是这么处理的。</p>

<p>本博首页的文章列表中，标题前面都会有一张很小的缩略图，有点小看起来并不是很舒服，不过能让一部分观众一看便大概了解相关文章的内容。有配图的直接引用配图并通过七牛 API 处理即可，没配图可以设置一张默认的缩略图，而配图为截图的文章，那么小的一张图片肯定很丑，所以鄙人为它们专门贴一张图片作为缩略图，可设置一个自定义页面变量 <code class="highlighter-rouge">page.thumb</code>。</p>

<p>在需要自定义缩略图的文章文件头信息中，插入 <code class="highlighter-rouge">thumb</code> 变量即可。那么问题来了，头信息并不能使用类似 <code class="highlighter-rouge">site.IMG_PATH</code> 这样的变量，总不会每次都复制完整的 URL 进去，这样下次更换图床或图床域名时，就很费事了。</p>

<p>这个可以确定一个字符串，作用和 <code class="highlighter-rouge">site.IMG_PATH</code> 一样，鄙人确定的字符串是“IMG_PATH”，主要为了和自定义变量的命名保持一致，例如本文：</p>

<figure class="highlight"><pre><code class="language-yaml" data-lang="yaml"><span class="s">---</span><span class="err">
</span>
<span class="s">……</span><span class="err">
</span>
<span class="s">thumb</span><span class="pi">:</span> <span class="s">IMG_PATH/qiniu.png</span><span class="err">
</span>
<span class="s">……</span><span class="err">
</span>
<span class="nn">---</span></code></pre></figure>

<p>在需要引用的地方，使用 Liquid 的文本替换，将其替换成 <code class="highlighter-rouge">site.IMG_PATH</code> 变量即可，例如本站的：</p>

<figure class="highlight"><pre><code class="language-html" data-lang="html"><span class="nt">&lt;img</span> <span class="na">class=</span><span class="s">"thumbnail"</span> <span class="na">src=</span><span class="s">"{{ post.thumb | replace:'IMG_PATH', site.IMG_PATH }}?imageView2/1/w/48/h/48"</span> <span class="nt">/&gt;</span></code></pre></figure>

<p>本站的完整代码可前往 GitHub 查看。</p>

<p><strong>本文历史</strong></p>

<ul>
  <li>2015 年 11 月 26 日 完成初稿</li>
</ul>

  </div>

  <div id="posts">
    <div id="random-posts" class="posts">
      <strong>猜你喜欢</strong>
      <ul>
      </ul>
    </div>
  
    <div id="recent-posts" class="posts">
      <strong>最近更新</strong>
      <ul>
      
        <li><a href="/configuring-ip-address-by-specifying-gateway" title="配置特定 IP 地址走指定网关">配置特定 IP 地址走指定网关 </a></li>
      
        <li><a href="/add-google-satellite-layer-in-amap" title="高德地图 API 叠加谷歌地图图层">高德地图 API 叠加谷歌地图图层 </a></li>
      
        <li><a href="/from-codoon-to-nikeplus" title="将咕咚的数据导入到 Nike+">将咕咚的数据导入到 Nike+ </a></li>
      
        <li><a href="/the-influence-of-sports-apps" title="运动 APP 的作用">运动 APP 的作用 </a></li>
      
        <li><a href="/the-last-run-of-june" title="今年 6 月的最后一次跑步">今年 6 月的最后一次跑步 </a></li>
      
      </ul>
    </div>
  </div>

  <div id="info" class="tech">

    <span id="share">
  <div id="qrcode"></div>
  <a id="wechat" title="分享到微信" data-wechat-url="http://127.0.0.1:4000/domain-setting-with-qiniu" href="javascript:void(0);"><i class="icon-wechat"></i></a>
  <a id="weibo" target="_blank" title="分享到微博" href="http://service.weibo.com/share/share.php?title=七牛的自定义域名 | 殷东亮的博客 via @&amp;url=http://127.0.0.1:4000/domain-setting-with-qiniu&amp;type=3&amp;searchPic=1"><i class="icon-weibo"></i></a>
  <a id="qzone" target="_blank" title="分享到 QQ 空间" href="http://sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey?url=http://127.0.0.1:4000/domain-setting-with-qiniu&amp;title=七牛的自定义域名 | 殷东亮的博客&amp;summary=使用七牛也有一段时间了，毫无疑问七牛是我用过的最好用的图床，此前已经说过七牛的一些优点。前些天把域名备案搞定，这下可以使用七牛云的自定义域名功能。&amp;site=http://127.0.0.1:4000"><i class="icon-qzone"></i></a>
  <a id="twitter" target="_blank" title="Share to Twitter" href="https://twitter.com/intent/tweet?url=http://127.0.0.1:4000/domain-setting-with-qiniu&amp;text=七牛的自定义域名｜殷东亮的博客&amp;via="><i class="icon-twitter"></i></a>
  <a id="facebook" target="_blank" title="Share to Facebook" href="http://www.facebook.com/sharer.php?u=http://127.0.0.1:4000/domain-setting-with-qiniu&amp;t=七牛的自定义域名 | 殷东亮的博客"><i class="icon-facebook-official"></i></a>
  <a id="gplus" target="_blank" title="Share to Google+" href="https://plus.google.com/share?url=http://127.0.0.1:4000/domain-setting-with-qiniu"><i class="icon-gplus-squared"></i></a>
</span>


    <span class='like'><a href="javascript:void(0)" title=""><i class="icon-heart-empty"></i> <span class="disqus-like-count"></span></a></span>
    <span class='view-code'><a href="javascript:void(0)" data-md="https://raw.githubusercontent.com/fooleap/fooleap.github.io/master/_posts/2015-11-26-domain-setting-with-qiniu.md" title="在正文中查看源码"><i class="icon-file-code"></i>源码</a></span>
    <span class="number-of-word"><i class="icon-calc"></i>1213 字</span>
    <span class="page-tags"><i class="icon-tags"></i><ul class="tags"> <li class="tag"><a href="/tags.html#七牛" target="_blank" title="查看“七牛”的相关文章">七牛</a></li><li class="tag"><a href="/tags.html#域名" target="_blank" title="查看“域名”的相关文章">域名</a></li><li class="tag"><a href="/tags.html#Jekyll" target="_blank" title="查看“Jekyll”的相关文章">Jekyll</a></li></ul></span>
  </div>

</article>

<div class="comment" id="disqus_thread">
    <a class="show-comments" href="http://127.0.0.1:4000/domain-setting-with-qiniu#disqus_thread" data-disqus-identifier="/domain-setting-with-qiniu"><span class="has-comment"><i class="icon-chat-empty"></i> 留下</span>评论 <span class="disqus-comment-count" data-disqus-url="http://127.0.0.1:4000/domain-setting-with-qiniu"></span></a>
</div>

  
      <footer class="site-footer">
        <small>&copy; 2012-2016 by Jekyll Theme</small>
      </footer>
  
    </main>

  </div>
  <div id="backtotop">
    <i class="icon-up-big"></i>
  </div>
  <script type="text/javascript" src="/assets/js/main.js"></script>
  </body>
</html>
