<!DOCTYPE html>
<!--[if lte IE 8]><html class="ie lte8"><![endif]-->
<!--[if IE]><html class="ie"><![endif]-->
<!--[if !IE]><!--><html><!--<![endif]-->
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <title>在 Windows 上搭建 Jekyll 写作环境 | 殷东亮的博客</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0,maximum-scale=1.3, user-scalable=no" />
    <meta name="description" content="曾几何时，别说是 Jekyll，Windows 用户想要好好用一会 Ruby 也相当麻烦，安装时各种出错，但现在想在 Windows 上搭建一个可用的 Jekyll 写作环境还是挺简单的。" />
    <meta name="keywords" content="Jekyll, Ruby, Windows, wdm, 博客" />
    <meta name="author" content="fooleap" />
    <meta http-equiv="Cache-Control" content="no-transform" />
    <meta http-equiv="Cache-Control" content="no-siteapp" />
    <link rel="canonical" href="http://127.0.0.1:4000/run-jekyll-on-windows" />
    <link rel="stylesheet" type="text/css" href="/assets/css/style.css" />
    <link rel="icon" href="/favicon.png" />
    <link rel="alternate" type="application/atom+xml" title="殷东亮的博客 Atom Feed" href="http://blog.fooleap.org/atom.xml" />
    <script type="text/javascript" src="/assets/js/modernizr.js"></script>
    <!--[if lte IE 9]>
      <script src="/assets/js/html5shiv.min.js"></script>
      <script src="/assets/js/respond.min.js"></script>
      <script src="/assets/js/classList.min.js"></script>
      <script type="text/javascript">
        document.createElement('main');
      </script>
    <![endif]-->
  </head>
  <body>
  <nav id="navigation">
      <ul class="navigation-list hide">
          <li><a href="/" class="navigation-item"><i class="icon-home"></i>首页</a></li>
          <li><a href="/archive.html" class="navigation-item"><i class="icon-box"></i>归档</a></li>
          <li><a href="/about.html" class="navigation-item"><i class="icon-user"></i>关于</a></li>
      </ul>
      <i id="menu" class="icon icon-menu"></i>
  </nav>
  
  <div class="container">
    <main class="wrapper">
      <header class="site-header">
        <h1>
          在 Windows 上搭建 Jekyll 写作环境
        </h1>
        <h2 class="sub-heading">
            <i class="icon-calendar"></i><time datetime="2015-05-27">2015 年 05 月 27 日</time>
        </h2>
      </header>
  <article class="post-content">
    
  <div class="main-content">
<ul id="toc">
  <li><a href="#id-ruby" id="markdown-toc-id-ruby">安装 Ruby</a></li>
  <li><a href="#id-ruby-devkit" id="markdown-toc-id-ruby-devkit">安装 Ruby DevKit</a></li>
  <li><a href="#id-jekyll" id="markdown-toc-id-jekyll">安装 Jekyll</a></li>
  <li><a href="#id-github-pages-ruby-gem" id="markdown-toc-id-github-pages-ruby-gem">GitHub Pages Ruby Gem</a></li>
  <li><a href="#id-section" id="markdown-toc-id-section">语法高亮（可选）</a></li>
  <li><a href="#id-wdm" id="markdown-toc-id-wdm">安装 wdm（可选）</a></li>
</ul>

<p>曾几何时，别说是 Jekyll，Windows 用户想要好好用一会 Ruby 也相当麻烦，安装时各种出错，但现在想在 Windows 上搭建一个可用的 Jekyll 写作环境还是挺简单的。</p>

<p>Jekyll 官方在 <a href="http://jekyllrb.com/docs/windows/">Jekyll on Windows</a> 引用了 Julian Thilo 的介绍 <a href="http://jekyll-windows.juthilo.com/">Run Jekyll on Windows</a>，部署的过程如下。</p>

<h2 id="id-ruby">安装 Ruby</h2>

<p>首先，按需到 <a href="http://rubyinstaller.org/downloads">RubyInstallers</a> 下载一个 Ruby 安装包，根据实际需求，鄙人选择“Ruby 2.2.2 (x64)”。</p>

<p>安装的时候注意勾选“Add Ruby executables to your PATH”，设置环境变量，这样一来，你将能在 Windows 命令行直接使用 Ruby 的相关命令。</p>

<p><img src="http://source.fooleap.org/run-jekyll-on-windows-01.png" alt="Add Ruby executables to your PATH" />
▲勾选 Add Ruby executables to your PATH</p>

<h2 id="id-ruby-devkit">安装 Ruby DevKit</h2>

<p>除此，由于 Jekyll 的一些依赖需要支持（例如 yajl-ruby），还需要安装一个 Ruby DevKit，Ruby  的开发工具包，一样<a href="http://rubyinstaller.org/downloads">在此</a> 按需获取，鄙人选择 <code class="highlighter-rouge">DevKit-mingw64-64-4.7.2-20130224-1432-sfx.exe</code>。</p>

<p>这是一个压缩包， 为它建个目录（永久）并解压进去，例如 <code class="highlighter-rouge">C:\RubyDevKit</code>，进入此目录并初始化。</p>

<div class="highlighter-rouge"><pre class="highlight"><code>cd C:\RubyDevKit
ruby dk.rb init
</code></pre>
</div>

<p>若它不能自动获取 Ruby 目录时，需编辑其目录下的 <code class="highlighter-rouge">config.yml</code> 文件手动照葫芦画飘在后面加上</p>

<div class="highlighter-rouge"><pre class="highlight"><code>- C:/Ruby22-x64
</code></pre>
</div>

<p>最后安装 DevKit</p>

<div class="highlighter-rouge"><pre class="highlight"><code>ruby dk.rb install
</code></pre>
</div>

<h2 id="id-jekyll">安装 Jekyll</h2>

<p>假如你打算将博客托管到 GitHub 上，建议直接跳到 <a href="#github-pages-ruby-gem">github-pages</a></p>

<p>和 Linux 一样，在 Windows 上安装 Jekyll 仅需在命令行输入</p>

<div class="highlighter-rouge"><pre class="highlight"><code>gem install jekyll
</code></pre>
</div>

<p>等待安装后，你就可以使用 Jekyll，使用 <code class="highlighter-rouge">jekyll new</code> 命令即可简单生成一个默认的博客，例如</p>

<div class="highlighter-rouge"><pre class="highlight"><code>jekyll new blog
</code></pre>
</div>

<h2 id="id-github-pages-ruby-gem">GitHub Pages Ruby Gem</h2>

<p>GitHub 提供 <a href="https://github.com/github/pages-gem"><code class="highlighter-rouge">github-pages</code></a> 这个 gem，方便我们本地搭建和 GitHub Pages 线上相同的 <a href="https://pages.github.com/versions/">Jekyll 环境</a>，包括 Jekyll、少部分插件、Markdown 渲染引擎等等。</p>

<p>安装 gem</p>

<div class="highlighter-rouge"><pre class="highlight"><code>gem install github-pages
</code></pre>
</div>

<p>或许版本不够新，但一定最适合将博客托管在 GitHub Pages 的你。</p>

<h2 id="id-section">语法高亮（可选）</h2>

<p>若你的博客托管在 GitHub，又想使用语法高亮（pygments），那么你需要安装 Python。到 <a href="https://www.python.org/downloads/windows/">Python Releases for Windows</a> 按需下载 Python 2，安装时和 Ruby 一样，如图注意勾选设置环境变量的选项。</p>

<p><img src="http://source.fooleap.org/run-jekyll-on-windows-02.png" alt="Python 设置环境变量" />
▲Python 设置环境变量</p>

<p>安装 pygments</p>

<div class="highlighter-rouge"><pre class="highlight"><code>pip install pygments
</code></pre>
</div>

<p>安装对应的 gem</p>

<div class="highlighter-rouge"><pre class="highlight"><code>gem install pygments.rb
</code></pre>
</div>

<p>在配置中启用</p>

<div class="highlighter-rouge"><pre class="highlight"><code>highlighter: pygments
</code></pre>
</div>

<p>你也可以使用 Rouge，安装</p>

<div class="highlighter-rouge"><pre class="highlight"><code>gem install rouge
</code></pre>
</div>

<p>在配置中启用</p>

<div class="highlighter-rouge"><pre class="highlight"><code>highlighter: rouge
</code></pre>
</div>

<h2 id="id-wdm">安装 wdm（可选）</h2>

<p>从 v2.4.0 开始，Jekyll 本地部署时，会相当于以前版本加 <code class="highlighter-rouge">--watch</code> 一样，监听其源文件的变化，而 Windows 似乎有时候并不会奏效，不过鄙人使用并没碰到。当然你若碰到，可安装 wdm (Windows Directory Monitor ) 来改善这个问题。</p>

<p>鄙人本不想安装，但运行 <code class="highlighter-rouge">jekyll s</code> 时，会有以下提醒</p>

<div class="highlighter-rouge"><pre class="highlight"><code>Please add the following to your Gemfile to avoid polling for changes:
  gem 'wdm', '&gt;= 0.1.0' if Gem.win_platform?
</code></pre>
</div>

<p>于是强迫症发，只好安装</p>

<div class="highlighter-rouge"><pre class="highlight"><code>gem install wdm
</code></pre>
</div>

<p>（现已无此问题）不过问题来了，wdm 死活安装不上，Google 了一下，据此 <a href="https://github.com/Maher4Ever/wdm/issues/18">Issus</a>，大概是与 Ruby 版本兼容问题，这个分支 <a href="https://github.com/HaiderRazvi/wdm">HaiderRazvi/wdm</a> 可以被装上</p>

<div class="highlighter-rouge"><pre class="highlight"><code>git clone https://github.com/HaiderRazvi/wdm.git
cd wdm
gem build wdm.gemspec
gem install wdm-0.1.0.gem
</code></pre>
</div>

<p>当然，关于 gem，你也可以通过 Bundler 来管理，在 <code class="highlighter-rouge">Gemfile</code> 文件中指定，具体可以看看<a href="http://blog.leanote.com/post/551ab4c438f41114e80014af">这篇文章</a>。</p>

<p><strong>本文历史</strong></p>

<ul>
  <li>2015 年 05 月 26 日 完成初稿</li>
  <li>2015 年 05 月 27 日 加入语法高亮</li>
  <li>2015 年 06 月 03 日 GitHub Pages Gem</li>
  <li>2016 年 03 月 04 日 更新</li>
</ul>

  </div>

  <div id="posts">
    <div id="random-posts" class="posts">
      <strong>猜你喜欢</strong>
      <ul>
      </ul>
    </div>
  
    <div id="recent-posts" class="posts">
      <strong>最近更新</strong>
      <ul>
      
        <li><a href="/configuring-ip-address-by-specifying-gateway" title="配置特定 IP 地址走指定网关">配置特定 IP 地址走指定网关 </a></li>
      
        <li><a href="/add-google-satellite-layer-in-amap" title="高德地图 API 叠加谷歌地图图层">高德地图 API 叠加谷歌地图图层 </a></li>
      
        <li><a href="/from-codoon-to-nikeplus" title="将咕咚的数据导入到 Nike+">将咕咚的数据导入到 Nike+ </a></li>
      
        <li><a href="/the-influence-of-sports-apps" title="运动 APP 的作用">运动 APP 的作用 </a></li>
      
        <li><a href="/the-last-run-of-june" title="今年 6 月的最后一次跑步">今年 6 月的最后一次跑步 </a></li>
      
      </ul>
    </div>
  </div>

  <div id="info" class="tech">

    <span id="share">
  <div id="qrcode"></div>
  <a id="wechat" title="分享到微信" data-wechat-url="http://127.0.0.1:4000/run-jekyll-on-windows" href="javascript:void(0);"><i class="icon-wechat"></i></a>
  <a id="weibo" target="_blank" title="分享到微博" href="http://service.weibo.com/share/share.php?title=在 Windows 上搭建 Jekyll 写作环境 | 殷东亮的博客 via @&amp;url=http://127.0.0.1:4000/run-jekyll-on-windows&amp;type=3&amp;searchPic=1"><i class="icon-weibo"></i></a>
  <a id="qzone" target="_blank" title="分享到 QQ 空间" href="http://sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey?url=http://127.0.0.1:4000/run-jekyll-on-windows&amp;title=在 Windows 上搭建 Jekyll 写作环境 | 殷东亮的博客&amp;summary=曾几何时，别说是 Jekyll，Windows 用户想要好好用一会 Ruby 也相当麻烦，安装时各种出错，但现在想在 Windows 上搭建一个可用的 Jekyll 写作环境还是挺简单的。&amp;site=http://127.0.0.1:4000"><i class="icon-qzone"></i></a>
  <a id="twitter" target="_blank" title="Share to Twitter" href="https://twitter.com/intent/tweet?url=http://127.0.0.1:4000/run-jekyll-on-windows&amp;text=在 Windows 上搭建 Jekyll 写作环境｜殷东亮的博客&amp;via="><i class="icon-twitter"></i></a>
  <a id="facebook" target="_blank" title="Share to Facebook" href="http://www.facebook.com/sharer.php?u=http://127.0.0.1:4000/run-jekyll-on-windows&amp;t=在 Windows 上搭建 Jekyll 写作环境 | 殷东亮的博客"><i class="icon-facebook-official"></i></a>
  <a id="gplus" target="_blank" title="Share to Google+" href="https://plus.google.com/share?url=http://127.0.0.1:4000/run-jekyll-on-windows"><i class="icon-gplus-squared"></i></a>
</span>


    <span class='like'><a href="javascript:void(0)" title=""><i class="icon-heart-empty"></i> <span class="disqus-like-count"></span></a></span>
    <span class='view-code'><a href="javascript:void(0)" data-md="https://raw.githubusercontent.com/fooleap/fooleap.github.io/master/_posts/2015-05-27-run-jekyll-on-windows.md" title="在正文中查看源码"><i class="icon-file-code"></i>源码</a></span>
    <span class="number-of-word"><i class="icon-calc"></i>2107 字</span>
    <span class="page-tags"><i class="icon-tags"></i><ul class="tags"> <li class="tag"><a href="/tags.html#Jekyll" target="_blank" title="查看“Jekyll”的相关文章">Jekyll</a></li><li class="tag"><a href="/tags.html#Ruby" target="_blank" title="查看“Ruby”的相关文章">Ruby</a></li><li class="tag"><a href="/tags.html#Windows" target="_blank" title="查看“Windows”的相关文章">Windows</a></li><li class="tag"><a href="/tags.html#wdm" target="_blank" title="查看“wdm”的相关文章">wdm</a></li><li class="tag"><a href="/tags.html#博客" target="_blank" title="查看“博客”的相关文章">博客</a></li></ul></span>
  </div>

</article>

<div class="comment" id="disqus_thread">
    <a class="show-comments" href="http://127.0.0.1:4000/run-jekyll-on-windows#disqus_thread" data-disqus-identifier="/run-jekyll-on-windows"><span class="has-comment"><i class="icon-chat-empty"></i> 留下</span>评论 <span class="disqus-comment-count" data-disqus-url="http://127.0.0.1:4000/run-jekyll-on-windows"></span></a>
</div>

  
      <footer class="site-footer">
        <small>&copy; 2012-2016 by Jekyll Theme</small>
      </footer>
  
    </main>

  </div>
  <div id="backtotop">
    <i class="icon-up-big"></i>
  </div>
  <script type="text/javascript" src="/assets/js/main.js"></script>
  </body>
</html>
