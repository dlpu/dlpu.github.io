<!DOCTYPE html>
<!--[if lte IE 8]><html class="ie lte8"><![endif]-->
<!--[if IE]><html class="ie"><![endif]-->
<!--[if !IE]><!--><html><!--<![endif]-->
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <title>百度坐标转换器 | 殷东亮的博客</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0,maximum-scale=1.3, user-scalable=no" />
    <meta name="description" content="GPS 坐标（WGS-84）或火星坐标（GCJ-02）批量转换为百度坐标（BD-09）" />
    <meta name="keywords" content="百度坐标, GPS 坐标, 火星坐标, WGS-84, GCJ-02, BD-09, Google Earth, Google Maps" />
    <meta name="author" content="fooleap" />
    <meta http-equiv="Cache-Control" content="no-transform" />
    <meta http-equiv="Cache-Control" content="no-siteapp" />
    <link rel="canonical" href="http://yindongliang.com/wgs84-or-gcj02-to-bd09/" />
    <link rel="stylesheet" type="text/css" href="/assets/css/style.css" />
    <style type="text/css">
    a:after{content:none!important;}
    body{
      overflow-y:scroll;
    }
    #coords{
      border: 1px solid #ddd;
      color: #ddd;
      font-size: 12px;
      width: 478px;
      height: 320px;
      outline: none;
      display:inline-block;
      float:left;
      margin-top: 0;
    }
    input {
      width: 13px;
      height: 13px;
      padding: 0;
      margin-right: 5px;
      vertical-align: middle;
    }
    input[disabled]{
      opacity: .3;
      box-shadow: none;
      background: #ddd;
    }
    .var{
      margin-left: 18px;
    }
    .other{
     float:left;
     width:160px;
     text-align: center;
     margin: 0;
    }
    .other p{
      font-size: 13px;
      text-align: left;
      line-height: 20px;
      padding: 0 5px;
    }
    #form #submit{
      padding: 2px 10px;
      margin: 10px 0;
      width: 70%;
      background: #eee;
      border: 1px solid #ddd;
      border-radius:3px;
      cursor:pointer;
      outline:none;
      zoom:1;
    }
    #form #submit:hover{
      background: #ddd;
    }
    .clear{
      clear: both;
    }
    #result{
      max-width: 640px;
      height: 386px;
      font-size: 12px;
    }
    .bdmap{
      display:none;
    }
    @media screen and (max-width: 640px) {
      #coords{width:98%;margin:0 auto;}
      .other{width:50%;float:left}
      #result{width:100%;border-radius:none;padding:0}
    }
    </style>
    <link rel="icon" href="/favicon.png" />
    <link rel="alternate" type="application/atom+xml" title="殷东亮的博客 Atom Feed" href="http://blog.fooleap.org/atom.xml" />
    <script type="text/javascript" src="/assets/js/modernizr.js"></script>
    <!--[if lte IE 9]>
      <script src="/assets/js/html5shiv.min.js"></script>
      <script src="/assets/js/respond.min.js"></script>
      <script src="/assets/js/classList.min.js"></script>
      <script type="text/javascript">
        document.createElement('main');
      </script>
    <![endif]-->
  </head>
  <body>
  <nav id="navigation">
      <ul class="navigation-list hide">
          <li><a href="/" class="navigation-item"><i class="icon-home"></i>首页</a></li>
          <li><a href="/about.html" class="navigation-item"><i class="icon-user"></i>关于</a></li>
          <li><a href="/archive.html" class="navigation-item"><i class="icon-box"></i>归档</a></li>
          <li><a href="/links.html" class="navigation-item"><i class="icon-link"></i>链接</a></li>
          <li><a href="/guestbook.html" class="navigation-item"><i class="icon-chat"></i>留言本</a></li>
      </ul>
      <i id="menu" class="icon icon-menu"></i>
  </nav>
  
  <div class="container">
    <main class="wrapper">
      <header class="site-header">
        <h1>
          百度坐标转换器
        </h1>
        <h2 class="sub-heading">
            GPS 坐标（WGS-84）或火星坐标（GCJ-02）批量转换为百度坐标（BD-09）
        </h2>
      </header>
  
  
  
  <article class="post-content">
  <h2 id="from-title">GPS 坐标集（WGS-84）</h2>
<textarea id="coords" name="coords"></textarea>
<div id="form" class="other">
  <p><input type="radio" name="from" id="earth" checked="" />GPS 坐标</p>
  <p><input type="radio" name="from" id="maps" />火星坐标</p>
  <p><input type="checkbox" id="newline" checked="" />换行</p>
  <p><input type="checkbox" id="bmappoint" />创建百度点坐标</p>
  <p><input type="radio" class="var" name="var" id="var" disabled="" />坐标点赋值</p>
  <p><input type="radio" class="var" name="var" id="array" disabled="" />坐标数组赋值</p>
  <button id="submit">提交</button>
</div>
<div id="ps" class="other">
  <p>
    采用 <a href="http://developer.baidu.com/map/changeposition.htm">百度坐标转换 API</a><br />
    最多可转换 100 个坐标点<br />
    结果保留 6 位小数<br />
    制作 <a href="/bmaps-changeposition.html" target="_blank">说明</a> <a href="http://source.fooleap.org/bmaps-changeposition.gif">使用方法</a><br />
    使用场景 <a href="/bmaps-polyline.html" target="_blank">参考</a><br />
    TODO：<br />
    突破数量限制<br />
    支持文件上传转换<br />
  </p>
</div>
<div class="clear"></div>
<div class="bdmap">
<h2>百度坐标集（BD-09）</h2>
<pre id="result"><code></code></pre>
</div>



  <div id="info" class="">

    <span id="share">
  <div id="qrcode"></div>
  <a id="wechat" title="分享到微信" data-wechat-url="http://yindongliang.com/wgs84-or-gcj02-to-bd09/" href="javascript:void(0);"><i class="icon-wechat"></i></a>
  <a id="weibo" target="_blank" title="分享到微博" href="http://service.weibo.com/share/share.php?title=百度坐标转换器 | 殷东亮的博客 via @&amp;url=http://yindongliang.com/wgs84-or-gcj02-to-bd09/&amp;type=3&amp;searchPic=1"><i class="icon-weibo"></i></a>
  <a id="qzone" target="_blank" title="分享到 QQ 空间" href="http://sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey?url=http://yindongliang.com/wgs84-or-gcj02-to-bd09/&amp;title=百度坐标转换器 | 殷东亮的博客&amp;summary=GPS 坐标（WGS-84）或火星坐标（GCJ-02）批量转换为百度坐标（BD-09）&amp;site=http://yindongliang.com"><i class="icon-qzone"></i></a>
  <a id="twitter" target="_blank" title="Share to Twitter" href="https://twitter.com/intent/tweet?url=http://yindongliang.com/wgs84-or-gcj02-to-bd09/&amp;text=百度坐标转换器｜殷东亮的博客&amp;via="><i class="icon-twitter"></i></a>
  <a id="facebook" target="_blank" title="Share to Facebook" href="http://www.facebook.com/sharer.php?u=http://yindongliang.com/wgs84-or-gcj02-to-bd09/&amp;t=百度坐标转换器 | 殷东亮的博客"><i class="icon-facebook-official"></i></a>
  <a id="gplus" target="_blank" title="Share to Google+" href="https://plus.google.com/share?url=http://yindongliang.com/wgs84-or-gcj02-to-bd09/"><i class="icon-gplus-squared"></i></a>
</span>


  </div>
</article>

  
  
      <footer class="site-footer">
        <small>&copy; 2012-2016 by Jekyll Theme</small>
      </footer>
  
    </main>

  </div>
  <div id="backtotop">
    <i class="icon-up-big"></i>
  </div>
  <script type="text/javascript" src="/assets/js/main.js"></script>
  <script type="text/javascript" src="/assets/js/jquery.min.js"></script>
  <script type="text/javascript">
  
  $('#coords').height($('#coords').width()*2/3);
  var def_coords = '格式：经度,纬度;经度,纬度;...（亦可使用 Google Earth/Maps 路径导出的 KML 坐标集数据）';
  $('#coords').html(def_coords);
  function textcolor (){
    switch ($('#coords').val()){
      case def_coords:
        $('#coords').css('color','#ccc');
        break;
      default:
        $('#coords').css('color','#333');
      }
  }
  window.onload = new function(){textcolor();};
  $('#coords').on('focus', function() {
    if( $(this).val() == def_coords ){$(this).empty()}
    textcolor()
  });
  $('#coords').on('blur', function() {
    if( $(this).val() == '' ){ $(this).html(def_coords) }
    textcolor()
  });
  $('#earth').trigger('click');
  var from = '1';
  function changer (word, digit){
    $('#from-title').html(word)
    from = digit;
  }
  $('#earth').on('change', function(){
    changer('GPS 坐标集（WGS-84）', '1');
  });
  $('#maps').on('change', function(){
    changer('火星坐标集（GCJ-02）', '3');
  });
  $('#bmappoint').on('change', function(){
    if ($('#bmappoint').is(':checked')){
      $('#var,#array').removeAttr('disabled');
    } else {
      $('#var,#array').attr('disabled','true');
      $("input[name='var']").each(function(){
        this.checked=false;
      });
    };
  });
  $('#submit').click(function(){
    var txt = $('#coords').val().replace(/，/g,',').replace(/；|,0\.0|,0/g,';').replace(/[^0-9,;\.]/g,'');
    txt = ( txt.charAt(txt.length-1) ==";") ? txt.substring(0,txt.length-1) : txt;
    var zburl = 'http://api.map.baidu.com/geoconv/v1/?from=' + from + '&to=5&output=json&ak=FCcc6261f101cd4ccefee22113a609de&coords=' + txt;
    points = new Array();
    $.ajax({
      type : "get", 
      async: false,  
      dataType : "jsonp",
      jsonp: "callback",
      url: zburl,
      success: function (data) {
        switch (data.status) {
          case 4:
            alert('数据含有非天朝坐标！');  
            break;
          case 24:
            alert('输入的数据格式有误！');
            break;
          case 25:
            alert('输入坐标点超过 100 个！');
            break;
          default:
            $('.bdmap').fadeIn();
        }
        $('#result').empty();
        for (var i=0;i<data.result.length;i++) {
          var coords = data.result[i].x.toFixed(6) + ',' + data.result[i].y.toFixed(6);
          if ($('#bmappoint').is(':checked')){
            if ($('#var').is(':checked')){
              var num = (i<9) ? '0' + (1+i).toString() : (1+i).toString();
              $('#result').append('var point'+num+' = ' + 'new BMap.Point('+ coords +'); ');
              points.push(" point" + num )
            } else{
              $('#result').append('new BMap.Point('+ coords +'), ');
            }
          } else {
            $('#result').append( coords +';');
          };
          if ($('#newline').is(':checked')){
            $('#result').append('<br>');
          };
        };
        if ($('#bmappoint').is(':checked') && $('#array').is(':checked')){
          if ($('#newline').is(':checked')){
             $('#result').prepend('<br>');
          };
          $('#result').html('var points = [ '+$('#result').html()+']');
        }
        if ($('#bmappoint').is(':checked') && $('#var').is(':checked')){
          $('#result').append('var points = ['+ points +' ];');
        }
      }
    });
  });
  </script>
  </body>
</html>
