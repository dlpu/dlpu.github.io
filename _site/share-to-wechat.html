<!DOCTYPE html>
<!--[if lte IE 8]><html class="ie lte8"><![endif]-->
<!--[if IE]><html class="ie"><![endif]-->
<!--[if !IE]><!--><html><!--<![endif]-->
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <title>为博客添加分享到微信功能 | 殷东亮的博客</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0,maximum-scale=1.3, user-scalable=no" />
    <meta name="description" content="网页上所谓的分享到微信功能，充其量就是显示一个该网页或该网页手机版对应页面 URL 地址的二维码，让别人用微信去扫码，便可通过微信自身的功能进行分享。" />
    <meta name="keywords" content="微信, 二维码, JavaScript" />
    <meta name="author" content="fooleap" />
    <meta http-equiv="Cache-Control" content="no-transform" />
    <meta http-equiv="Cache-Control" content="no-siteapp" />
    <link rel="canonical" href="http://127.0.0.1:4000/share-to-wechat" />
    <link rel="stylesheet" type="text/css" href="/assets/css/style.css" />
    <link rel="icon" href="/favicon.png" />
    <link rel="alternate" type="application/atom+xml" title="殷东亮的博客 Atom Feed" href="http://blog.fooleap.org/atom.xml" />
    <script type="text/javascript" src="/assets/js/modernizr.js"></script>
    <!--[if lte IE 9]>
      <script src="/assets/js/html5shiv.min.js"></script>
      <script src="/assets/js/respond.min.js"></script>
      <script src="/assets/js/classList.min.js"></script>
      <script type="text/javascript">
        document.createElement('main');
      </script>
    <![endif]-->
  </head>
  <body>
  <nav id="navigation">
      <ul class="navigation-list hide">
          <li><a href="/" class="navigation-item"><i class="icon-home"></i>首页</a></li>
          <li><a href="/archive.html" class="navigation-item"><i class="icon-box"></i>归档</a></li>
          <li><a href="/about.html" class="navigation-item"><i class="icon-user"></i>关于</a></li>
      </ul>
      <i id="menu" class="icon icon-menu"></i>
  </nav>
  
  <div class="container">
    <main class="wrapper">
      <header class="site-header">
        <h1>
          为博客添加分享到微信功能
        </h1>
        <h2 class="sub-heading">
            <i class="icon-calendar"></i><time datetime="2015-11-30">2015 年 11 月 30 日</time>
        </h2>
      </header>
  <article class="post-content">
    
  <div class="main-content">
<p>网页上所谓的分享到微信功能，充其量就是显示一个该网页或该网页手机版对应页面 URL 地址的二维码，让别人用微信去扫码，便可通过微信自身的功能进行分享。</p>

<p>例如腾讯新闻的分享到微信，其实那个小图标的 <code class="highlighter-rouge">title</code> 值是 <code class="highlighter-rouge">查看文本二维码</code>。</p>

<p><img src="http://source.fooleap.org/share-to-wechat-01.png" alt="腾讯新闻分享到微信" />
▲腾讯新闻分享到微信</p>

<p>如果想要简单点，可以直接使用 JiaThis<a href="http://www.jiathis.com/" title="JiaThis">[1]</a> 或者百度分享<a href="http://share.baidu.com/" title="百度分享">[2]</a> 等社会化分享按钮所提供的服务，根据网站提供的流程进行自定义，获取代码并加到网站相关模板文件里即可。</p>

<h2 id="id-jquery--jqueryqrcodejs">jQuery 插件 jquery.qrcode.js</h2>

<p>如果不喜欢使用第三方服务，那么则可以使用鄙人之前在 <a href="/qrcode.html">无处不在的二维码</a> 所提到的，可生成二维码的 jQuery 插件 jquery.qrcode.js <a href="http://jeromeetienne.github.io/jquery-qrcode/" title="jquery.qrcode.js">[3]</a>，压缩后还不到 4 K。</p>

<p>这个插件的使用，仅需在模板里引用相关文件，例如：</p>

<figure class="highlight"><pre><code class="language-html" data-lang="html"><span class="nt">&lt;script </span><span class="na">type=</span><span class="s">"text/javascript"</span> <span class="na">src=</span><span class="s">"jquery.min.js"</span><span class="nt">&gt;&lt;/script&gt;</span>
<span class="nt">&lt;script </span><span class="na">type=</span><span class="s">"text/javascript"</span> <span class="na">src=</span><span class="s">"jquery.qrcode.min.js"</span><span class="nt">&gt;&lt;/script&gt;</span></code></pre></figure>

<p>并创建一个用于包含生成的二维码图片的 DOM 元素。</p>

<figure class="highlight"><pre><code class="language-html" data-lang="html"><span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">"qrcode"</span><span class="nt">&gt;&lt;/div&gt;</span></code></pre></figure>

<p>最后再添加生成指定二维码的代码即可，例如生成当前页面 URL 地址二维码如下。</p>

<figure class="highlight"><pre><code class="language-html" data-lang="html"><span class="nt">&lt;script </span><span class="na">type=</span><span class="s">"text/javascript"</span><span class="nt">&gt;</span>
  <span class="nx">$</span><span class="p">(</span><span class="s1">'#qrcode'</span><span class="p">).</span><span class="nx">qrcode</span><span class="p">(</span><span class="nx">location</span><span class="p">.</span><span class="nx">href</span><span class="p">);</span>
<span class="nt">&lt;/script&gt;</span></code></pre></figure>

<p>默认大小是 256 px，有点大，当然可以自定义大小：</p>

<figure class="highlight"><pre><code class="language-html" data-lang="html"><span class="nt">&lt;script </span><span class="na">type=</span><span class="s">"text/javascript"</span><span class="nt">&gt;</span>
  <span class="nx">$</span><span class="p">(</span><span class="s1">'#qrcode'</span><span class="p">).</span><span class="nx">qrcode</span><span class="p">({</span><span class="na">width</span><span class="p">:</span> <span class="mi">100</span><span class="p">,</span> <span class="na">height</span><span class="p">:</span> <span class="mi">100</span><span class="p">,</span> <span class="na">text</span><span class="p">:</span> <span class="nx">location</span><span class="p">.</span><span class="nx">href</span><span class="p">});</span>	
<span class="nt">&lt;/script&gt;</span></code></pre></figure>

<h2 id="id-js--qrcodejs">JS 库 qrcode.js</h2>

<p>如果网站不用 jQuery，还有一个 JS 库 qrcode.js<a href="http://davidshimjs.github.io/qrcodejs/" title="qrcode.js">[4]</a> 可以选择。使用起来跟 jQuery 插件的差不多，本站目前是使用的就是这款。</p>

<p>引入文件：</p>

<figure class="highlight"><pre><code class="language-html" data-lang="html"><span class="nt">&lt;script </span><span class="na">type=</span><span class="s">"text/javascript"</span> <span class="na">src=</span><span class="s">"qrcode.min.js"</span><span class="nt">&gt;&lt;/script&gt;</span></code></pre></figure>

<p>创建 DOM 元素：</p>

<figure class="highlight"><pre><code class="language-html" data-lang="html"><span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">"qrcode"</span><span class="nt">&gt;&lt;/div&gt;</span></code></pre></figure>

<p>生成二维码图片：</p>

<figure class="highlight"><pre><code class="language-html" data-lang="html"><span class="nt">&lt;script </span><span class="na">type=</span><span class="s">"text/javascript"</span><span class="nt">&gt;</span>
  <span class="kd">var</span> <span class="nx">qrcode</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">QRCode</span><span class="p">(</span><span class="s1">'qrcode'</span><span class="p">,</span> <span class="p">{</span><span class="na">width</span><span class="p">:</span> <span class="mi">100</span><span class="p">,</span> <span class="na">height</span><span class="p">:</span> <span class="mi">100</span><span class="p">,</span> <span class="na">text</span><span class="p">:</span> <span class="nx">location</span><span class="p">.</span><span class="nx">href</span><span class="p">});</span>
<span class="nt">&lt;/script&gt;</span></code></pre></figure>

<p>至于一些自定义参数的设置，例如 <code class="highlighter-rouge">correctLevel</code> 等，以及二维码应该以什么形式存在，点击显示或是直接显示在页面上，这就见仁见智了，不多废话。</p>

<p>鄙人使用的 Jekyll 静态博客，大概也只能这么搞。若使用 WordPress 等，或许还有更多的方法可以选择。</p>

<p>上述方法是针对 PC 端浏览器的，如果是移动端的，则可能需要自己申请微信 JSAPI 权限，这估计也是个大坑，对于 QQ 浏览器或 UC 浏览器，则可以试试 JefferyWang 的 nativeShare.js <a href="https://github.com/JefferyWang/nativeShare.js" title="JefferyWang/nativeShare.js">[5]</a>。</p>

<h2 id="id-section">参考资料</h2>

<p><strong>本文历史</strong></p>

<ul>
  <li>2015 年 11 月 30 日 完成初稿</li>
</ul>

  </div>

  <div id="posts">
    <div id="random-posts" class="posts">
      <strong>猜你喜欢</strong>
      <ul>
      </ul>
    </div>
  
    <div id="recent-posts" class="posts">
      <strong>最近更新</strong>
      <ul>
      
        <li><a href="/configuring-ip-address-by-specifying-gateway" title="配置特定 IP 地址走指定网关">配置特定 IP 地址走指定网关 </a></li>
      
        <li><a href="/add-google-satellite-layer-in-amap" title="高德地图 API 叠加谷歌地图图层">高德地图 API 叠加谷歌地图图层 </a></li>
      
        <li><a href="/from-codoon-to-nikeplus" title="将咕咚的数据导入到 Nike+">将咕咚的数据导入到 Nike+ </a></li>
      
        <li><a href="/the-influence-of-sports-apps" title="运动 APP 的作用">运动 APP 的作用 </a></li>
      
        <li><a href="/the-last-run-of-june" title="今年 6 月的最后一次跑步">今年 6 月的最后一次跑步 </a></li>
      
      </ul>
    </div>
  </div>

  <div id="info" class="tech">

    <span id="share">
  <div id="qrcode"></div>
  <a id="wechat" title="分享到微信" data-wechat-url="http://127.0.0.1:4000/share-to-wechat" href="javascript:void(0);"><i class="icon-wechat"></i></a>
  <a id="weibo" target="_blank" title="分享到微博" href="http://service.weibo.com/share/share.php?title=为博客添加分享到微信功能 | 殷东亮的博客 via @&amp;url=http://127.0.0.1:4000/share-to-wechat&amp;type=3&amp;searchPic=1"><i class="icon-weibo"></i></a>
  <a id="qzone" target="_blank" title="分享到 QQ 空间" href="http://sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey?url=http://127.0.0.1:4000/share-to-wechat&amp;title=为博客添加分享到微信功能 | 殷东亮的博客&amp;summary=网页上所谓的分享到微信功能，充其量就是显示一个该网页或该网页手机版对应页面 URL 地址的二维码，让别人用微信去扫码，便可通过微信自身的功能进行分享。&amp;site=http://127.0.0.1:4000"><i class="icon-qzone"></i></a>
  <a id="twitter" target="_blank" title="Share to Twitter" href="https://twitter.com/intent/tweet?url=http://127.0.0.1:4000/share-to-wechat&amp;text=为博客添加分享到微信功能｜殷东亮的博客&amp;via="><i class="icon-twitter"></i></a>
  <a id="facebook" target="_blank" title="Share to Facebook" href="http://www.facebook.com/sharer.php?u=http://127.0.0.1:4000/share-to-wechat&amp;t=为博客添加分享到微信功能 | 殷东亮的博客"><i class="icon-facebook-official"></i></a>
  <a id="gplus" target="_blank" title="Share to Google+" href="https://plus.google.com/share?url=http://127.0.0.1:4000/share-to-wechat"><i class="icon-gplus-squared"></i></a>
</span>


    <span class='like'><a href="javascript:void(0)" title=""><i class="icon-heart-empty"></i> <span class="disqus-like-count"></span></a></span>
    <span class='view-code'><a href="javascript:void(0)" data-md="https://raw.githubusercontent.com/fooleap/fooleap.github.io/master/_posts/2015-11-30-share-to-wechat.md" title="在正文中查看源码"><i class="icon-file-code"></i>源码</a></span>
    <span class="number-of-word"><i class="icon-calc"></i>1468 字</span>
    <span class="page-tags"><i class="icon-tags"></i><ul class="tags"> <li class="tag"><a href="/tags.html#微信" target="_blank" title="查看“微信”的相关文章">微信</a></li><li class="tag"><a href="/tags.html#二维码" target="_blank" title="查看“二维码”的相关文章">二维码</a></li><li class="tag"><a href="/tags.html#JavaScript" target="_blank" title="查看“JavaScript”的相关文章">JavaScript</a></li></ul></span>
  </div>

</article>

<div class="comment" id="disqus_thread">
    <a class="show-comments" href="http://127.0.0.1:4000/share-to-wechat#disqus_thread" data-disqus-identifier="/share-to-wechat"><span class="has-comment"><i class="icon-chat-empty"></i> 留下</span>评论 <span class="disqus-comment-count" data-disqus-url="http://127.0.0.1:4000/share-to-wechat"></span></a>
</div>

  
      <footer class="site-footer">
        <small>&copy; 2012-2016 by Jekyll Theme</small>
      </footer>
  
    </main>

  </div>
  <div id="backtotop">
    <i class="icon-up-big"></i>
  </div>
  <script type="text/javascript" src="/assets/js/main.js"></script>
  </body>
</html>
